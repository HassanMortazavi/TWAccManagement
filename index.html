<!DOCTYPE html> 
<html lang="fa">
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>ویرایش فایل دراپ‌باکس</title> 
</head> 
<body> 
    <h2>اضافه کردن "سلام" به انتهای فایل دراپ‌باکس</h2> 
    <button onclick="appendToFile()">اضافه کن</button> 
    <script> 
        const accessToken = "YOUR_ACCESS_TOKEN"; // 🔴 توکن دراپ‌باکس رو اینجا بذار 
        const filePath = "/test.txt"; // 🔵 مسیر فایل در دراپ‌باکس 
        async function appendToFile() { 
            try { 
                // ۱️⃣ خواندن محتوای فعلی فایل 
                let getFileUrl = "https://content.dropboxapi.com/2/files/download"; 
                let getFileResponse = await fetch(getFileUrl, { 
                    method: "POST", 
                    headers: { 
                        "Authorization": `Bearer ${accessToken}`, 
                        "Dropbox-API-Arg": JSON.stringify({ "path": filePath }) 
                    } 
                }); 
                if (!getFileResponse.ok) { 
                    throw new Error("خطا در خواندن فایل: " + await getFileResponse.text());
                } 
                let currentContent = await getFileResponse.text(); // محتوای قبلی 
                let newContent = currentContent + "\nsalam"; 
                let uploadUrl = "https://content.dropboxapi.com/2/files/upload"; 
                let uploadResponse = await fetch(uploadUrl, { 
                    method: "POST", 
                    headers: { 
                        "Authorization": `Bearer ${accessToken}`, 
                        "Dropbox-API-Arg": JSON.stringify({ 
                            "path": filePath, 
                            "mode": "overwrite" 
                        }), 
                        "Content-Type": "application/octet-stream" 
                    }, 
                    body: newContent 
                }); 
                if (!uploadResponse.ok) { 
                    throw new Error("خطا در ذخیره فایل: " + await uploadResponse.text());
                } 
                alert("✅ متن 'سلام' به فایل اضافه شد!");
            } catch (error) { 
                alert("❌ خطا: " + error.message);
            } 
        } 
    </script> 
</body> 
</html>
